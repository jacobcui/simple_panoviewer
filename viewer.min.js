var KEY_LEFT=37,KEY_UP=38,KEY_RIGHT=39,KEY_DOWN=40,ZOOM_DELTA=120,containerId,isUserInteracting=!1,lon=0,lat=0,phi=0,theta=0;function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight)}function onDocumentMouseDown(a){a.preventDefault();isUserInteracting=!0;onPointerDownPointerX=a.clientX;onPointerDownPointerY=a.clientY;onPointerDownLon=lon;onPointerDownLat=lat}
function onDocumentKeyDown(a){isUserInteracting=!0;switch(a.keyCode){case KEY_LEFT:lon-=12;break;case KEY_UP:lat+=12;break;case KEY_RIGHT:lon+=12;break;case KEY_DOWN:lat-=12}}function onDocumentMouseMove(a){!0===isUserInteracting&&(lon=.1*(onPointerDownPointerX-a.clientX)+onPointerDownLon,lat=.1*(a.clientY-onPointerDownPointerY)+onPointerDownLat)}function onDocumentMouseUp(a){isUserInteracting=!1}
function onDocumentMouseWheel(a){a.wheelDeltaY?camera.fov-=.05*a.wheelDeltaY:a.wheelDelta?camera.fov-=.05*a.wheelDelta:a.detail&&(camera.fov+=1*a.detail);camera.updateProjectionMatrix()}function animate(){requestAnimationFrame(animate);update()}var staticFreeze=!1;
function update(){staticFreeze||(lon+=.1);!0===isUserInteracting&&(staticFreeze=!0);lat=Math.max(-85,Math.min(85,lat));phi=THREE.Math.degToRad(90-lat);theta=THREE.Math.degToRad(lon);camera.target.x=500*Math.sin(phi)*Math.cos(theta);camera.target.y=500*Math.cos(phi);camera.target.z=500*Math.sin(phi)*Math.sin(theta);camera.lookAt(camera.target);renderer.render(scene,camera)}
function init(a,c){var f,d;f=document.getElementById(a);camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1100);camera.target=new THREE.Vector3(0,0,0);scene=new THREE.Scene;d=new THREE.SphereGeometry(500,60,40);d.scale(-1,1,1);var e;if(0<c.toLowerCase().indexOf(".mp4")){var b=document.getElementById("video");b||(b=document.createElement("video"));b.width=window.innerWidth;b.height=window.innerHeight;b.controls=!0;b.loop=!0;b.muted=!1;b.src=c;b.setAttribute("webkit-playsinline",
"webkit-playsinline","controls");b.play();b=new THREE.VideoTexture(b);b.minFilter=THREE.LinearFilter;b.format=THREE.RGBFormat;e=new THREE.MeshBasicMaterial({map:b})}else e=new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load(c)});d=new THREE.Mesh(d,e);scene.add(d);renderer=new THREE.WebGLRenderer;renderer.setPixelRatio(window.devicePixelRatio);renderer.setSize(window.innerWidth,window.innerHeight);f.appendChild(renderer.domElement);document.addEventListener("mousedown",onDocumentMouseDown,
!1);document.addEventListener("mousemove",onDocumentMouseMove,!1);document.addEventListener("mouseup",onDocumentMouseUp,!1);document.addEventListener("mousewheel",onDocumentMouseWheel,!1);document.addEventListener("MozMousePixelScroll",onDocumentMouseWheel,!1);document.addEventListener("keydown",onDocumentKeyDown,!1);document.addEventListener("dragover",function(a){a.preventDefault();a.dataTransfer.dropEffect="copy"},!1);document.addEventListener("dragenter",function(a){document.body.style.opacity=
.5},!1);document.addEventListener("dragleave",function(a){document.body.style.opacity=1},!1);document.addEventListener("drop",function(a){a.preventDefault();var b=new FileReader;b.addEventListener("load",function(a){e.map.image.src=a.target.result;e.map.needsUpdate=!0},!1);b.readAsDataURL(a.dataTransfer.files[0]);document.body.style.opacity=1},!1);window.addEventListener("resize",onWindowResize,!1)}function panoIt(a,c){init(a,c);animate()};
